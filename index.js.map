{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '46879645-5baa1dadd9c91ee84aac66fac'; \nconst BASE_URL = 'https://pixabay.com/api/';\nconst PER_PAGE = 15;\n\nexport async function fetchImages(query, page = 1) {\n    const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&per_page=${PER_PAGE}&page=${page}`;\n    const response = await axios.get(url);\n    \n     if (response.status !== 200) {\n        throw new Error('Failed to fetch images');\n    }\n    \n    return {\n        images: response.data.hits.map(({ webformatURL, largeImageURL, tags, likes, comments, views, downloads }) => ({\n            webformatURL,\n            largeImageURL,\n            tags,\n            likes,\n            comments,\n            views,\n            downloads,\n        })),\n        totalHits: response.data.totalHits,\n    };\n} ","export function renderGallery(images, append = false) {\n    const galleryContainer = document.querySelector('.gallery');\n    const markup = images.map(image => `\n    \n        <div class=\"image-card\">\n            <a href=\"${image.largeImageURL}\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n            </a>\n            <div class=\"image-info\">\n                <span>ðŸ’– ${image.likes}</span>\n                <span>ðŸ‘€ ${image.views}</span>\n                <span>ðŸ’¬ ${image.comments}</span>\n                <span>ðŸ“¥ ${image.downloads}</span>\n            </div>\n        </div>\n    `).join('');\n\n    if (append) {\n        galleryContainer.insertAdjacentHTML('beforeend', markup);\n    } else {\n        galleryContainer.innerHTML = markup;\n    }\n\n}\n\nexport function showError(message) {\n    iziToast.error({\n        title: 'Error',\n        message: message,\n        position: 'topRight',\n        color: 'red',\n    });\n}","import { fetchImages } from './js/pixabay-api';\n// import { renderGallery, showError } from './js/render-functions';\nimport { renderGallery, showError } from './js/render-functions.js';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n// import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst searchForm = document.querySelector('#search-form');\nconst galleryContainer = document.querySelector('.gallery');\nconst loader = document.getElementById('loader'); \nconst loadMoreButton = document.createElement('button');\nloadMoreButton.textContent = 'Load more';\nloadMoreButton.classList.add('load-more');\ngalleryContainer.insertAdjacentElement('afterend', loadMoreButton);\n\nlet lightbox = new SimpleLightbox('.gallery a');\nlet query = '';\nlet page = 1;\nlet totalHits = 0;\n\nsearchForm.addEventListener('submit', async (event) => {\n    event.preventDefault();\n    query = searchForm.elements['imageSearch']?.value.trim();\n  \n    if (!query) {\n        showError('Please enter a valid search query');\n        return;\n    }\n\n    page = 1;\n    loadMoreButton.style.display = 'none';\n    galleryContainer.innerHTML = '';\n    loader.style.display = 'block'; \n\n    try {\n        const { images, totalHits: fetchedTotalHits } = await fetchImages(query, page);\n        totalHits = fetchedTotalHits;\n\n        renderGallery(images);\n        lightbox.refresh();\n        if (totalHits > page * 15) loadMoreButton.style.display = 'block';\n    } catch (error) {\n        showError(error.message);\n    } finally {\n        loader.style.display = 'none';\n    }\n});\n\nloadMoreButton.addEventListener('click', async () => {\n    page += 1;\n    loader.style.display = 'block';\n\n    try {\n        const { images } = await fetchImages(query, page);\n        renderGallery(images, true);\n        lightbox.refresh();\n        \n        if (page * 15 >= totalHits) {\n            loadMoreButton.style.display = 'none';\n            showError(\"We're sorry, but you've reached the end of search results.\");\n        } else {\n            smoothScroll();\n        }\n    } catch (error) {\n        showError(error.message);\n    } finally {\n        loader.style.display = 'none';\n    }\n});\n\nfunction smoothScroll() {\n    const { height: cardHeight } = galleryContainer.firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n    });\n}\n    \n    \n"],"names":["API_KEY","BASE_URL","PER_PAGE","fetchImages","query","page","url","response","axios","webformatURL","largeImageURL","tags","likes","comments","views","downloads","renderGallery","images","append","galleryContainer","markup","image","showError","message","searchForm","loader","loadMoreButton","lightbox","SimpleLightbox","totalHits","event","_a","fetchedTotalHits","error","smoothScroll","cardHeight"],"mappings":"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"}